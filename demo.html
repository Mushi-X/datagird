<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="css/index.css" type="text/css" rel="stylesheet"/>

    <title>kyDatagrid Demo</title>
    <style>
        * { margin: 0; padding: 0; }
        body { margin: 0 20px; }
        h1 { font-size: 40px; text-align: center; margin: 10px 0; }
        h3 { font-size: 16px; text-align: center; margin: 10px 0; }
        h3 a { font-size: 16px; text-align: center; margin: 10px 0; }
    </style>
</head>
<body>
<h1>kyDatagrid Demo</h1>
<h3>Author : <a href="mailto:huzhaobin@kingyea.com.cn">Mushi</a></h3>
<table id="demoTable"></table>
</body>

<script src="js/jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="js/kyDatagrid.min.js" type="text/javascript"></script>

<script type="text/javascript">
    $(function () {
        $("#demoTable").kyDatagrid({
            title: "办公设备",
            method: "get",
            url: 'data.json',
            border: true,
            idField: 'id',
            pagination: true,
            singleSelect: false,
            rownumbers: true,
            enableChecked: true,
            pageNumber: 1,
            emptyMsg: '这里没有数据！',
            pageSize: 15,
            maxPageLen: 6,
            columns: [
                {field: 'ID', title: 'ID', width: 100, hidden: true},
                {
                    field: 'name', title: '商品名称', width: 100, sortable: true,
                    formatter: function (val, row, index) {
                        return "<a href='javascript:void(0)'>" + val + "</a>";
                    }
                },
                {
                    field: 'status', title: '商品状态', width: 100, align: 'center', titleAlign: 'left',
                    formatter: function (val, row, index) {
                        switch (val) {
                            case 1 :
                                return "上架";
                                break;
                            case 2 :
                                return "缺货";
                                break;
                        }
                    }
                },
                {
                    field: 'productValue', title: '商品属性', width: 100,
                    childColumns: [
                        {
                            field: 'info', title: '基本信息', width: 100,
                            childColumns: [
                                {field: 'unit', title: '单位', width: 100, align: 'center'},
                                {field: 'num', title: '数量', width: 100, sortable: true},
                                {field: 'price', title: '单价', width: 100, align: 'right', sortable: true}
                            ]
                        },
                        {field: 'value1', title: '高级属性一', width: 100, sortable: true},
                        {field: 'value2', title: '高级属性二', width: 100, sortable: true},
                        {field: 'value3', title: '高级属性三', width: 100, sortable: true}
                    ]
                },
                {
                    field: 'stock', title: '库存信息', width: 100,
                    childColumns: [
                        {field: 'total', title: '总数', width: 100, sortable: true, align: 'right'},
                        {field: 'sell', title: '已售', width: 100, sortable: true, align: 'right'},
                        {field: 'left', title: '剩余', width: 100, sortable: true, align: 'right'}
                    ]
                },
                {
                    field: 'oper', title: '操作', width: 100, align: 'center',
                    formatter: function (val, row, index) {
                        if (index % 2 == 0) {
                            return "<a class='btn-blue' href='javascript:void(0)' onclick='getSelections()'>按钮</a>"
                        } else {
                            return "<button class='btn-blue' href='javascript:void(0)'>按钮</button>"
                        }
                    }
                }
            ],
            onLoadSuccess: function () {
            },
            onDblClickRow: function (index, row) {
                alert('you click the ' + index + ' row, the row data is ' + JSON.stringify(row));
            }
        });
    });


    function getSelections() {
        console.log($("#demoTable").kyDatagrid('getSelections'));
    }
</script>
</html>